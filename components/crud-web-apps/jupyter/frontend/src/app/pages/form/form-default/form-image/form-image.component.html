<lib-form-section
  title="Image"
  text="A started Jupyter Docker Image with a baseline deployment and typical
  ML packages"
  icon="fa:fab:docker"
>
  <section>
    <div class="server-type">Choose server type:</div>
    <mat-button-toggle-group [formControl]="parentForm.get('serverType')" aria-label="Server Type">
      <mat-button-toggle value="jupyter" aria-label="Use JupyterLab based server">
        <mat-icon style="height:72px !important; width:200px !important;" svgIcon="jupyterlab"></mat-icon>
      </mat-button-toggle>
      <mat-button-toggle value="vs-code" aria-label="Use VS-Code based server">
        <mat-icon style="height:72px !important; width:200px !important;" svgIcon="vs-code"></mat-icon>
      </mat-button-toggle>
      <mat-button-toggle value="r-studio" aria-label="Use R-Studio based server">
        <mat-icon style="height:72px !important; width:200px !important;" svgIcon="r-studio"></mat-icon>
      </mat-button-toggle>
    </mat-button-toggle-group>
  </section>

  <mat-checkbox
    *ngIf="!jupyterReadonly && !vscodeReadonly && !rstudioReadonly"
    [formControl]="parentForm.get('customImageCheck')"
  >
    Custom Image
  </mat-checkbox>

  <mat-form-field
    class="wide"
    appearance="outline"
    *ngIf="!parentForm?.value.customImageCheck && parentForm?.value.serverType === 'jupyter'"
  >
    <!-- If readonly, then make it an input element instead of select -->
    <mat-label>Image</mat-label>
    <mat-select
      placeholder="Docker Image"
      [formControl]="parentForm.get('jupyterImage')"
    >
      <mat-option *ngFor="let img of jupyterImages" [value]="img">
        {{ img }}
      </mat-option>
    </mat-select>
    <mat-error>Please provide and Image to use</mat-error>
  </mat-form-field>

  <mat-form-field
  class="wide"
  appearance="outline"
  *ngIf="!parentForm?.value.customImageCheck && parentForm?.value.serverType === 'vs-code'"
>
  <!-- If readonly, then make it an input element instead of select -->
  <mat-label>Image</mat-label>
  <mat-select
    placeholder="Docker Image"
    [formControl]="parentForm.get('vsCodeImage')"
  >
    <mat-option *ngFor="let img of vscodeImages" [value]="img">
      {{ img }}
    </mat-option>
  </mat-select>
  <mat-error>Please provide and Image to use</mat-error>
</mat-form-field>

<mat-form-field
class="wide"
appearance="outline"
*ngIf="!parentForm?.value.customImageCheck && parentForm?.value.serverType === 'r-studio'"
>
<!-- If readonly, then make it an input element instead of select -->
<mat-label>Image</mat-label>
<mat-select
  placeholder="Docker Image"
  [formControl]="parentForm.get('rStudioImage')"
>
  <mat-option *ngFor="let img of rstudioImages" [value]="img">
    {{ img }}
  </mat-option>
</mat-select>
<mat-error>Please provide and Image to use</mat-error>
</mat-form-field>

  <mat-form-field
    class="wide"
    appearance="outline"
    *ngIf="parentForm?.value.customImageCheck"
  >
    <mat-label>Custom Image</mat-label>
    <input
      matInput
      placeholder="Provide a custom Image"
      [formControl]="parentForm.get('customImage')"
      #cstmimg
    />
    <mat-error>Please provide and Image to use</mat-error>
  </mat-form-field>

  <lib-advanced-options>
    <div class="row">
      <mat-form-field class="column" appearance="outline">
        <mat-label>Image pull policy</mat-label>
        <mat-select [formControl]="parentForm.get('imagePullPolicy')">
          <mat-option value="Always">Always</mat-option>
          <mat-option value="IfNotPresent">IfNotPresent</mat-option>
          <mat-option value="Never">Never</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </lib-advanced-options>
</lib-form-section>
